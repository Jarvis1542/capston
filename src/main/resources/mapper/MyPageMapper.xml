<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fivekm_home.charge.mapper.MyPageMapper">
    <update id="updatePassword">
        update member_view set password = #{password}
        where email = #{email}
    </update>

    <insert id="regGuard">
        insert into mp_view values (
            #{email},
            #{mp_lic},
            #{mp_co},
            #{mp_co_num},
            sysdate,
            null
        )
    </insert>

    <insert id="regRegister">
        insert into reg_view values (
            #{email},
            #{reg_lic},
            #{acc_num},
            #{bank_name},
            sysdate
        )
    </insert>

    <select id="checkResidence" resultType="int">
        select count(*) from res
        where res_name = #{res_name}
    </select>

    <insert id="regResidence">
        insert into res_view values (
            #{res_name},
            #{post_code},
            #{road_addr},
            #{jibun_addr},
            #{detail_addr},
            #{extra_addr},
            #{lat},
            #{lng},
            sysdate,
            #{email}
        )
    </insert>

    <select id="userHpBookmark" resultType="com.fivekm_home.charge.domain.USER.UserHpBookmark">
        select hp_pic, hp_name, place, min30_fee, addmin10_fee, apt_map,
        road_addr, extra_addr, name, phone, manage_time, m.email
        from member_view m, hp_view p, res_view r
        where m.email = r.email
        and p.res_name = r.res_name
        and m.email = #{email}
        and hp_chk = (select hp_chk
                            from hp_view
                            where hp_chk = 'Y')
        and hp_name = #{hp_name}
    </select>

    <insert id="regCar">
        insert into car_view values (
            #{car_id}, #{car_name,jdbcType=VARCHAR}, #{car_model,jdbcType=VARCHAR},
            #{car_scs_type,jdbcType=VARCHAR}, #{email}
        )
    </insert>

    <select id="memCarList" parameterType="com.fivekm_home.charge.domain.USER.MemCarList" resultType="com.fivekm_home.charge.domain.USER.MemCarList">
        select * from car_view
        where email = #{email}
    </select>

</mapper>